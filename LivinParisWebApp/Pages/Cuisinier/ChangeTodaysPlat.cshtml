@page
@model LivinParisWebApp.Pages.Cuisinier.ChangeTodaysPlatModel
@{
    Layout = "~/Pages/Shared/_NavBarLayout.cshtml";
    ViewData["Title"] = "Plat du jour";
}

<head>
    <link rel="stylesheet" href="/css/site.css" />
</head>

<div class="top-panel-plat">
    <p class="message-top-panel">Plat du jour</p>
</div>

<form method="post" class="form-plat" enctype="multipart/form-data">
    <div class="content-today-plat">
        <div class="left-colonne">
            <div class="ligne1">
                <div class="inputs">
                    <input asp-for="NomDuPlat" placeholder="Nom du Plat" />
                    <input asp-for="Prix" placeholder="Prix" />
                </div>
            </div>
            <div class="ligne2">
                <div class="inputs">
                    <input asp-for="NbDePersonnes" placeholder="Nb de Personnes" />
                    <input asp-for="Type" placeholder="Type" />
                </div>
            </div>
            <div class="ligne3">
                <div class="creation-container">
                    <p>Création</p>
                    <div class="input-creation">
                        <input asp-for="JourCreation" placeholder="Jour" />
                        <input asp-for="MoisCreation" placeholder="Mois" />
                        <input asp-for="AnneeCreation" placeholder="Année" />
                    </div>
                </div>
            </div>
            <div class="ligne4">
                <div class="peremption-container">
                    <p>Péremption</p>
                    <div class="input-peremption">
                        <input asp-for="JourPerem" placeholder="Jour" />
                        <input asp-for="MoisPerem" placeholder="Mois" />
                        <input asp-for="AnneePerem" placeholder="Année" />
                    </div>
                </div>
            </div>
        </div>

        <div class="right-colonne">
            <div class="ligne1">
                <div class="charge">
                    <p>Photo</p>
                    <input asp-for="ImageFile" type="file" accept="image/*" />
                </div>
                <div class="img-container">
                    <p>Aperçu</p>
                    <img id="preview" src="@(Model.ImageUrl ?? "/images/plats/default.png")" alt="Aperçu" />
                </div>
            </div>
            <div class="ligne2">
                <div class="inputs">
                    <input asp-for="Nationalite" placeholder="Nationalité" />
                    <input asp-for="Regime" placeholder="Régime" />
                </div>
            </div>
            <div class="ligne3">
                <div class="ingre-container">
                    <p>Ingrédients</p>
                    <div class="input-ingre">
                        <input asp-for="Ingredients" placeholder="Ingrédients" />
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="bottom-actions">
        <button class="btn-confirm" asp-page-handler="CuisinierPanelConfirm" type="submit">Confirmer</button>
        <button class="btn-back" type="submit" asp-page-handler="CuisinierPanelRetour">Retour</button>
    </div>
</form>
@section Scripts {
    <script>
        const fileInput = document.querySelector('input[type="file"]');
        const preview = document.getElementById('preview');

        fileInput?.addEventListener('change', e => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = e => preview.src = e.target.result;
                reader.readAsDataURL(file);
            }
        });
    </script>
}